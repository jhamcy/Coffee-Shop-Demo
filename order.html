<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brew & Bean | Order Form</title>

<style>
/* --- VARIABLES & RESET --- */
:root {
  --primary: #3b2f2f;
  --accent: #c59d5f;
  --bg: #f8f5f2;
  --white: #ffffff;
  --text: #4a4a4a;
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Roboto, sans-serif; }

body { background: var(--bg); color: var(--text); padding-bottom: 50px; }

/* --- HEADER --- */
header {
  background: var(--primary);
  padding: 1rem 5%;
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 1000;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

header h1 { font-size: 1.2rem; color: var(--accent); text-transform: uppercase; letter-spacing: 1px; }

.close-btn {
  color: white;
  text-decoration: none;
  font-weight: bold;
  font-size: 0.9rem;
  padding: 5px 15px;
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 20px;
  transition: 0.3s;
}

.close-btn:hover { background: white; color: var(--primary); }

/* --- FORM CONTAINER --- */
.container { max-width: 600px; margin: 30px auto; padding: 0 20px; }

.order-card {
  background: white;
  padding: 25px;
  border-radius: 25px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}

h2 { color: var(--primary); margin-bottom: 20px; text-align: center; }

.input-group { margin-bottom: 15px; }

label { display: block; font-weight: bold; margin-bottom: 5px; color: var(--primary); }

input, select, textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 12px;
  font-size: 1rem;
  outline: none;
  transition: 0.3s;
}

input:focus, select:focus { border-color: var(--accent); }

/* Table Number Field (Conditional) */
#tableNumGroup {
  display: block; /* Shown by default because Dine-in is first option */
  animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* --- ITEM SELECTION & CART --- */
.add-item-box {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  background: #fdfaf7;
  padding: 15px;
  border-radius: 15px;
  border: 1px dashed var(--accent);
}

.btn-add {
  background: var(--primary);
  color: white;
  border: none;
  padding: 0 20px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: bold;
}

#cartTable {
  width: 100%;
  margin: 20px 0;
  border-collapse: collapse;
}

#cartTable th { text-align: left; padding: 10px; border-bottom: 2px solid var(--bg); color: #888; font-size: 0.9rem; }
#cartTable td { padding: 12px 10px; border-bottom: 1px solid var(--bg); }

.remove-btn { color: #e74c3c; cursor: pointer; border: none; background: none; font-size: 1.2rem; }

.total-display {
  text-align: right;
  font-size: 1.4rem;
  font-weight: bold;
  color: var(--primary);
  margin: 20px 0;
  padding-right: 10px;
}

/* --- BUTTONS --- */
.btn-send {
  display: block;
  width: 100%;
  background: var(--accent);
  color: white;
  padding: 16px;
  text-decoration: none;
  border-radius: 50px;
  font-weight: bold;
  font-size: 1.1rem;
  border: none;
  cursor: pointer;
  transition: 0.3s;
  box-shadow: 0 4px 15px rgba(197, 157, 95, 0.3);
}

.btn-send:hover { background: var(--primary); transform: translateY(-2px); }

.back-link { display: block; text-align: center; margin-top: 20px; color: #888; text-decoration: none; font-size: 0.9rem; }

/* --- SUCCESS OVERLAY --- */
.success-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(59, 47, 47, 0.98);
  display: none; /* Hidden by default */
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: white;
  z-index: 3000;
  text-align: center;
  padding: 20px;
}

.success-icon {
  font-size: 3rem;
  color: var(--accent);
  margin-bottom: 20px;
  border: 3px solid var(--accent);
  border-radius: 50%;
  width: 80px; height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.success-overlay h2 { color: var(--accent); font-size: 2rem; margin-bottom: 10px; }
.success-overlay p { margin-bottom: 30px; line-height: 1.5; opacity: 0.9; }

</style>
</head>
<body>

<header>
  <h1>Brew & Bean</h1>
  <a href="menu.html" class="close-btn">✕ Close</a>
</header>

<div class="container">
  <div class="order-card">
    <h2>Complete Your Order</h2>
    
    <div class="input-group">
      <label>Full Name</label>
      <input type="text" id="custName" placeholder="Juan Dela Cruz">
    </div>

    <div class="input-group">
      <label>Order Type</label>
      <select id="orderType" onchange="toggleTableInput()">
        <option value="Dine-in">Dine-in</option>
        <option value="Take-out">Take-out</option>
      </select>
    </div>

    <div class="input-group" id="tableNumGroup">
      <label>Table Number</label>
      <input type="number" id="tableNumber" placeholder="Enter your table #" min="1">
    </div>

    <hr style="margin: 25px 0; opacity: 0.1;">

    <label>Choose Your Items</label>
    <div class="add-item-box">
      <select id="itemSelect">
        <optgroup label="Coffee">
          <option value="Espresso" data-price="120">Espresso - ₱120</option>
          <option value="Cappuccino" data-price="150">Cappuccino - ₱150</option>
          <option value="Latte" data-price="160">Latte - ₱160</option>
          <option value="Mocha" data-price="170">Mocha - ₱170</option>
        </optgroup>
        <optgroup label="Tea">
          <option value="Green Tea" data-price="120">Green Tea - ₱120</option>
          <option value="Chai Latte" data-price="150">Chai Latte - ₱150</option>
        </optgroup>
        <optgroup label="Pastries">
          <option value="Croissant" data-price="90">Croissant - ₱90</option>
          <option value="Brownie" data-price="100">Brownie - ₱100</option>
          <option value="Muffin" data-price="80">Muffin - ₱80</option>
        </optgroup>
      </select>
      <button class="btn-add" onclick="addToCart()">Add</button>
    </div>

    <table id="cartTable">
      <thead>
        <tr>
          <th>Item</th>
          <th>Price</th>
          <th></th>
        </tr>
      </thead>
      <tbody id="cartBody">
        </tbody>
    </table>

    <div class="total-display">Total: ₱<span id="totalPrice">0</span></div>

    <div class="input-group">
      <label>Special Instructions</label>
      <textarea id="orderNotes" rows="2" placeholder="e.g., Extra shot, less sugar, etc."></textarea>
    </div>

    <button class="btn-send" onclick="sendToWhatsApp()">Send Order to WhatsApp</button>
    <a href="menu.html" class="back-link">Return to Menu</a>
  </div>
</div>

<div class="success-overlay" id="successPopup">
  <div class="success-icon">✓</div>
  <h2>Order Confirmed!</h2>
  <p>We're taking you to WhatsApp now.<br>Please remember to hit <strong>'Send'</strong> in the chat!</p>
  <button class="btn-send" style="width: auto; padding: 12px 30px;" onclick="location.reload()">Place New Order</button>
</div>

<script>
let cart = [];
let total = 0;

// Toggle Table Number field
function toggleTableInput() {
  const orderType = document.getElementById('orderType').value;
  const tableGroup = document.getElementById('tableNumGroup');
  tableGroup.style.display = (orderType === 'Dine-in') ? 'block' : 'none';
}

// Cart Logic
function addToCart() {
  const select = document.getElementById('itemSelect');
  const itemName = select.value;
  const itemPrice = parseInt(select.options[select.selectedIndex].getAttribute('data-price'));

  cart.push({ name: itemName, price: itemPrice });
  updateCartUI();
}

function removeFromCart(index) {
  cart.splice(index, 1);
  updateCartUI();
}

function updateCartUI() {
  const cartBody = document.getElementById('cartBody');
  cartBody.innerHTML = '';
  total = 0;

  cart.forEach((item, index) => {
    total += item.price;
    cartBody.innerHTML += `
      <tr>
        <td>${item.name}</td>
        <td>₱${item.price}</td>
        <td><button class="remove-btn" onclick="removeFromCart(${index})">✕</button></td>
      </tr>
    `;
  });

  document.getElementById('totalPrice').innerText = total;
}

// Final WhatsApp Send
function sendToWhatsApp() {
  const name = document.getElementById('custName').value;
  const type = document.getElementById('orderType').value;
  const table = document.getElementById('tableNumber').value;
  const notes = document.getElementById('orderNotes').value;

  if(!name) { alert("Please enter your name."); return; }
  if(type === 'Dine-in' && !table) { alert("Please enter your table number."); return; }
  if(cart.length === 0) { alert("Your cart is empty!"); return; }

  // --- REPLACE WITH YOUR WHATSAPP NUMBER ---
  const phoneNumber = "639000000000"; 

  let itemList = cart.map(item => `- ${item.name} (₱${item.price})`).join('%0A');
  let tableInfo = (type === 'Dine-in') ? `*Table Number:* ${table}%0A` : '';
  
  const message = `*NEW ORDER - BREW %26 BEAN*%0A` +
                  `--------------------------%0A` +
                  `*Customer:* ${name}%0A` +
                  `*Type:* ${type}%0A` +
                  tableInfo + 
                  `%0A*Items Ordered:*%0A${itemList}%0A%0A` +
                  `*Total:* ₱${total}%0A` +
                  `*Notes:* ${notes || 'None'}`;

  // Show Success Popup
  document.getElementById('successPopup').style.display = 'flex';

  // Open WhatsApp after a short delay
  setTimeout(() => {
    window.open(`https://wa.me/${phoneNumber}?text=${message}`, '_blank');
  }, 2000);
}
</script>

</body>
</html>